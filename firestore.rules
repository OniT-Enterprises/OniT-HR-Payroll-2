rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // DEVELOPMENT RULES - Allow broader access for development purposes

    // Allow read/write to all main collections for development
    match /employees/{empId} {
      allow read, write: if true; // DEVELOPMENT ONLY!
    }

    match /departments/{deptId} {
      allow read, write: if true; // DEVELOPMENT ONLY!
    }

    match /candidates/{candidateId} {
      allow read, write: if true; // DEVELOPMENT ONLY!
    }

    match /test/{testId} {
      allow read, write: if true; // DEVELOPMENT ONLY - for connectivity tests
    }

    // Allow anonymous users to access most collections during development
    match /tenants/{tid}/{document=**} {
      allow read, write: if true; // DEVELOPMENT ONLY - simplified for testing
    }

    // Reference data accessible to all authenticated users (including anonymous)
    match /reference/{document=**} {
      allow read: if true; // DEVELOPMENT ONLY
      allow write: if false;
    }

    // Allow access to other common collections
    match /jobs/{jobId} {
      allow read, write: if true; // DEVELOPMENT ONLY!
    }

    match /applications/{appId} {
      allow read, write: if true; // DEVELOPMENT ONLY!
    }

    match /interviews/{interviewId} {
      allow read, write: if true; // DEVELOPMENT ONLY!
    }

    // Default allow for development (can be restricted later)
    match /{document=**} {
      allow read, write: if true; // DEVELOPMENT ONLY - REMOVE IN PRODUCTION!
    }
  }
}
